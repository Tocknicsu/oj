#include <bits/stdc++.h>
using namespace std;
typedef long long ll;
map<ll, ll> deg;
map<ll, vector<ll> > ed;
int main(){
    ios_base::sync_with_stdio(0), cin.tie(0);
    ll n, m, d;
    cin >> n >> m >> d;
    for(int i = 0 ; i < m ; i++){
        ll a, b;
        cin >> a >> b;
        deg[b]++;
        ed[a].push_back(b);
    }
    vector<ll> rrank, rank(n);
    for(int i = 0 ; i < n ; i++)
        cin >> rank[i];
    queue<ll> Q;
    for(map<ll, ll>::iterator x = deg.begin() ; x != deg.end() ; x++){
        if( !(*x).second )
            Q.push((*x).first);
    }
    while(Q.size()){
        rrank.push_back(Q.front());
        ll x = Q.front(); Q.pop();
        vector<ll> &E = ed[x];
        for(int i = 0 ; i < ed[x].size() 

    }
    return 0;
}
